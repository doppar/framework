<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Error - {{ error_message }}</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <script>
        const loadDarkMode = () => {
            const theme = localStorage.getItem('theme') ?? 'system'

            if (
                theme === 'dark' ||
                (theme === 'system' &&
                    window.matchMedia('(prefers-color-scheme: dark)')
                        .matches)
            ) {
                document.documentElement.classList.add('dark')
            }
        }
        loadDarkMode();
    </script>
</head>

<style type="text/tailwindcss">
    @theme {
        --color-primary: --color-neutral-50;
        --color-primary-fg: --color-neutral-50;
    }

    @custom-variant dark (&:where(.dark, .dark *));
</style>



<body
    class="px-2 md:px-3 lg:px-12 py-2 md:py-3 lg:py-4 bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-50 transition-colors duration-200">
    <div class="top-bar rounded-lg">
        <div class="flex border-[1.2px] bg-white/[1%] border-dashed dark:border-white/4 border-neutral-900/4 p-4 rounded-lg">
            <div>
                <div class="dark:text-white text-neutral-950 text-3xl font-bold">
                    {{ exception_class }}
                </div>
                <div class="dark:text-neutral-300 text-neutral-700 text-2xl">
                    {{ error_message }}
                </div>
            </div>
            <div class="ml-auto flex flex-col">
                <div class="ml-auto">
                    <button id="themeToggle" class="
                            p-2 cursor-pointer rounded-md" aria-label="Toggle theme">
                        <svg id="sunIcon" class="hidden dark:block w-5 h-5" xmlns="http://www.w3.org/2000/svg"
                            fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
                        </svg>


                        <svg id="moonIcon" class="block dark:hidden size-5" xmlns="http://www.w3.org/2000/svg"
                            fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z" />
                        </svg>
                    </button>
                    <button id="copyToClipBoard" class="
                            p-2 cursor-pointer rounded-md" title="copy as markdown" aria-label="Toggle theme">
                        <svg class="size-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                            stroke-width="1.5" stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z" />
                        </svg>
                    </button>
                </div>
                <!-- versions -->
                <div
                    class="rounded-md flex border-[1.2px] bg-white/[1%] border-dashed text-sm py-1 bg-white/2 border-neutral-900/4 px-2 mt-4 dark:border-white/4">
                    <div class="pl-1 pr-2 border-r border-neutral-900/4 dark:border-white/4">
                        <span class="text-neutral-800 dark:text-neutral-500">DOPPAR</span> {{ doppar_version }}
                    </div>
                    <div class="px-2">
                        <span class="text-neutral-800 dark:text-neutral-500">PHP</span> {{ php_version }}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- endpoints details -->
    <div class="flex  border-[1.2px] bg-white/[1%] border-dashed my-5 dark:border-white/4 border-neutral-900/4 p-4 rounded-lg">
        {{ request_method }} / {{ request_url }} {{ timestamp }}
    </div>
    <!-- aside:backtrace <-> main:file-preview -->
    <div class="flex gap-4">

        <!-- 
        <aside class="basis-1/4">
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Officia corporis  quibusdam
            nihil esse unde consequatur a voluptas voluptatibus exercitationem. Officiis, qui molestiae. Tempore
            reprehenderit veritatis nulla atque quaerat, ipsa quod illo incidunt iusto architecto similique nisi
            voluptatum delectus autem accusamus cumque! Itaque, vel ut. Sequi, ipsum aspernatur. Voluptates veniam
            ducimus sunt quis officiis ab quos nobis odio ratione excepturi, facilis sit velit libero vitae suscipit
            modi placeat dignissimos, dolore rem architecto voluptatum molestias aliquid animi deserunt. Quod eos optio
            est assumenda sapiente? Omnis beatae dignissimos illo aliquid, natus nulla quae inventore odio hic neque
            harum exercitationem autem sequi blanditiis et.
        </aside> -->

        <main class="_basis-3/4 rounded-lg border-[1.2px] bg-white/[1%] border-dashed border-neutral-900/5 dark:border-white/5 p-4">
            <div class="flex items-center gap-2 bg-neutral-100 dark:bg-neutral-900 rounded-md px-2 py-1">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="size-6">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5" />
                </svg>
                {{ error_file }}
            </div>
            <div>
                {{ file_content }}
            </div>
        </main>
    </div>
</body>

<script>
    const ThemeManager = {
        getTheme() {
            const stored = localStorage.getItem('theme');
            if (stored) return stored;

            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        },

        applyTheme(theme) {
            const html = document.documentElement;

            if (theme === 'dark') {
                html.classList.add('dark');
            } else {
                html.classList.remove('dark');
            }

            localStorage.setItem('theme', theme);
        },

        toggleTheme() {
            const current = this.getTheme();
            const newTheme = current === 'dark' ? 'light' : 'dark';
            this.applyTheme(newTheme);
            return newTheme;
        },

        init() {
            this.applyTheme(this.getTheme());

            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                if (!localStorage.getItem('theme')) {
                    this.applyTheme(e.matches ? 'dark' : 'light');
                }
            });

            const toggleBtn = document.getElementById('themeToggle');

            if (toggleBtn) {
                toggleBtn.addEventListener('click', () => {
                    this.toggleTheme();
                });
            }
        }
    };

    ThemeManager.init()
</script>

</html>